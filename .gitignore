# =========================
# AVP repo ignore rules
# =========================

# temp / patch artifacts
*.bak
*.tmp
*~
*.new
*.patch
*.rej
*.orig
*.swp
.*.swp
.DS_Store
Thumbs.db
nohup.out
core
core.*

# legacy (nao usar mais)
autovpn/
logs/
backups/

# -------------------------
# AVP canonical tree (TRACK)
# -------------------------
# code + config
!avp/
!avp/bin/
!avp/bin/*
!avp/lib/
!avp/lib/*
!avp/policy/
!avp/policy/*
!avp/docs/
!avp/docs/*
!avp/changelog/
!avp/changelog/*
!avp/www/
!avp/www/*
!avp/www/avp.asp

# -------------------------
# AVP runtime (IGNORE)
# -------------------------
avp/cache/
avp/www/*.json

avp/logs/*
!avp/logs/.keep

avp/state/*
!avp/state/.keep

avp/backups/*
!avp/backups/.keep


# --- AVP canonical tree (TRACK ONLY CODE DIRS) ---
# Regra base no arquivo ignora avp/* (tudo). Abaixo liberamos somente o que será versionado.

!avp/bin/
!avp/bin/**

!avp/lib/
!avp/lib/**

!avp/www/
!avp/www/**

!avp/changelog/
!avp/changelog/**

# O resto permanece ignorado (policy/state/logs/backups/docs etc.)

# --- AVP canonical tree (FINAL RULES) ---
# Track only: avp/{bin,lib,www,changelog}
# Ignore: runtime/config: avp/{policy,state,logs,backups,docs}
# Ignore runtime JSON in www

# ignore runtime/config dirs
avp/policy/
avp/state/
avp/logs/
avp/backups/
avp/docs/

# base: ignore everything under avp (se já existir antes, ok)
avp/*

# allowlist (track)
!avp/bin/
!avp/bin/**
!avp/lib/
!avp/lib/**
!avp/www/
!avp/www/**
!avp/changelog/
!avp/changelog/**

# but ignore runtime json even inside tracked www
avp/www/*.json
